version: 1
frontend:
    phases:
        preBuild:
          commands:
                - 'cd pws'
                - 'rm -rf node_modules'
                - 'npm cache clean --force'
                - 'npm ci'
        build:
            commands:
                - 'npm run build --verbose'
    artifacts:
        baseDirectory: pws/.next
        files:
            - '**/*'
    cache:
        paths:
            - node_modules
            - pws/.next/cache