version: 1
frontend:
    phases:
        preBuild:
          commands:
                - 'rm -rf pws/node_modules'
                - 'npm cache clean --force'
                - 'cd pws && npm ci'
        build:
            commands:
                - 'cd pws && npm run build --verbose'
    artifacts:
        baseDirectory: pws/.next
        files:
            - '**/*'
    cache:
        paths:
            - pws/node_modules
            - pws/.next/cache